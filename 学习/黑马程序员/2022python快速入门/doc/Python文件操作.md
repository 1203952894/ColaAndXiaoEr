# Python文件操作

> author : Cola
> Time : 2022.8.20
> To : 学习 Python 中文件操作的用法

**目录结构：**

> - 文件的编码
> - 文件的读取
>   - 文件操作的应用
>   - 常见的文件操作
> - 文件的写入
> - 文件的追加

## 文件的编码

> 编码就是一种规则集合，记录了文本内容和二进制之间相互转换的逻辑，常见的编码有：
>
> - UTF -8
> - GBK
> - BIG 5

## 文件的读取

> 内存中存在的数据在计算机关机后就会消失，要长久的保存数据，就需要使用硬盘，光盘，U 盘等设备，为了便于数据等管理和检索，引入“文件"的概念。
>
> 一篇文章，一段视频，一个可执行程序，都可以被保存为一个文件，并赋予 一个文件名。操作系统以稳健为单位管理磁盘中的数据，一般来说文件可分为：
>
> - 文本文件
> - 视频文件
> - 音频文件
> - 图像文件
> - 可执行文件

### 文件操作的应用

> 在日常生活中 文件操作主要是包括
>
> - 打开
> - 关闭
> - 读
> - 写
>
> 我们平常对文件的基本操作大概可以分为三个步骤：
>
> - 打开文件
> - 读写文件
> - 关闭文件
>
> 注意： 可以只打开或关闭文件，不进行任何读写

### 常见的文件操作

> - open ( ) 打开文件函数
>   - 格式：open (name, mode, encoding)
>     - name: 目标文件名
>     - mode：访问方式：只读，写入 ，追加
>     - encoding：编码格式
>   - 返回：文件对象
> - read ( ) 读取函数
>   - 文件对象.read(num)
>     - num：表示从文件中读取数据的长度（bytes）默认为所有
>   - 文件对象.readlines（）
>     - 按照行的方式读取整个文件并返回列表
>   - 文件对象.readline ( )
>     - 一次读取一行
> - close( ) 关闭文件函数
> - with open （路径）as f:
>   - 通过 with open的语句块中对文件进行操作可以在操作完成后自动关闭文件

<img src="https://raw.githubusercontent.com/1203952894/macminiPicGo/main/20220821173409.png"/>

<img src="https://raw.githubusercontent.com/1203952894/macminiPicGo/main/20220821173237.png"/>

## 文件的写入

> 文件对象.write(内容)
>
> 文件对象.flush()
>
> - 直接调用 write 内容并不会真正写入到文件中而是积攒到内存中我们称之为缓存区
> - 调用 flush 的时候，内容会真正写入文件
> - 这样做可以避免频繁的操作硬盘，提高效率
> - close ( ) 方法带有 flush ( )

## 文件的追加

> 相较于文件的写入 仅需将文件访问模式由 w 修改为 a
>
> - w 模式
>   - 如果文件不存在则创建新文件
>   - 如果文件存在则将原有内容清空
> - a 模式
>   - 如果文件不存在则创建文件
>   - 如果文件存在则追加写入

```python
fr = open ("bill.txt", "r", encoding = "utf-8")	# r 方法打开文件
fw = open ("bill.txt.bak", "w",encoding = "utf-8")	# w 方法打开文件
# for 循环遍历
for line in fr:
	line = line.strip()	# 用 strip 去除元素前后对空格
	# 判断内容
	if line.split(",")[4] == "测试":
		continue
	fw.write(line)
	fw.write("\n")
# 关闭文件
fw.close()
fr.close()
```
